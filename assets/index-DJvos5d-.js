const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/components-d6ctvfwJ.js","assets/vendor-BadBNqqM.js","assets/types-BEe6FBee.js","assets/services-1P_J0fle.js"])))=>i.map(i=>d[i]);
import{a$ as d,r as a,j as o,b0 as _e}from"./vendor-BadBNqqM.js";import{L as Se,a as xe}from"./components-d6ctvfwJ.js";import{d as g}from"./services-1P_J0fle.js";import"./types-BEe6FBee.js";(function(){const y=document.createElement("link").relList;if(y&&y.supports&&y.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))L(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const m of l.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&L(m)}).observe(document,{childList:!0,subtree:!0});function x(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function L(i){if(i.ep)return;i.ep=!0;const l=x(i);fetch(i.href,l)}})();const ve="modulepreload",be=function(n){return"/kingshms/"+n},J={},u=function(y,x,L){let i=Promise.resolve();if(x&&x.length>0){let m=function(f){return Promise.all(f.map(v=>Promise.resolve(v).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),w=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));i=m(x.map(f=>{if(f=be(f),f in J)return;J[f]=!0;const v=f.endsWith(".css"),p=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${p}`))return;const _=document.createElement("link");if(_.rel=v?"stylesheet":ve,v||(_.as="script"),_.crossOrigin="",_.href=f,w&&_.setAttribute("nonce",w),document.head.appendChild(_),v)return new Promise((R,C)=>{_.addEventListener("load",R),_.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${f}`)))})}))}function l(m){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=m,window.dispatchEvent(c),!c.defaultPrevented)throw m}return i.then(m=>{for(const c of m||[])c.status==="rejected"&&l(c.reason);return y().catch(l)})},Q=d.lazy(()=>u(()=>import("./components-d6ctvfwJ.js").then(n=>n.D),__vite__mapDeps([0,1,2,3]))),Ee=d.lazy(()=>u(()=>import("./components-d6ctvfwJ.js").then(n=>n.R),__vite__mapDeps([0,1,2,3]))),ye=d.lazy(()=>u(()=>import("./components-d6ctvfwJ.js").then(n=>n.B),__vite__mapDeps([0,1,2,3]))),je=d.lazy(()=>u(()=>import("./components-d6ctvfwJ.js").then(n=>n.S),__vite__mapDeps([0,1,2,3]))),Ae=d.lazy(()=>u(()=>import("./components-d6ctvfwJ.js").then(n=>n.b),__vite__mapDeps([0,1,2,3]))),Le=d.lazy(()=>u(()=>import("./components-d6ctvfwJ.js").then(n=>n.T),__vite__mapDeps([0,1,2,3]))),Pe=d.lazy(()=>u(()=>import("./components-d6ctvfwJ.js").then(n=>n.c),__vite__mapDeps([0,1,2,3]))),ke=d.lazy(()=>u(()=>import("./components-d6ctvfwJ.js").then(n=>n.F),__vite__mapDeps([0,1,2,3]))),we=d.lazy(()=>u(()=>import("./components-d6ctvfwJ.js").then(n=>n.d),__vite__mapDeps([0,1,2,3]))),Re=d.lazy(()=>u(()=>import("./components-d6ctvfwJ.js").then(n=>n.A),__vite__mapDeps([0,1,2,3]))),Te=d.lazy(()=>u(()=>import("./components-d6ctvfwJ.js").then(n=>n.e),__vite__mapDeps([0,1,2,3]))),Ie=d.lazy(()=>u(()=>import("./components-d6ctvfwJ.js").then(n=>n.M),__vite__mapDeps([0,1,2,3]))),Oe=d.lazy(()=>u(()=>import("./components-d6ctvfwJ.js").then(n=>n.f),__vite__mapDeps([0,1,2,3]))),De=d.lazy(()=>u(()=>import("./components-d6ctvfwJ.js").then(n=>n.g),__vite__mapDeps([0,1,2,3]))),X=d.lazy(()=>u(()=>import("./components-d6ctvfwJ.js").then(n=>n.P),__vite__mapDeps([0,1,2,3]))),Ne=()=>{const[n,y]=a.useState(!1);a.useEffect(()=>{if(typeof window<"u"){const e=new URLSearchParams(window.location.search);y(e.get("booking")==="public")}},[]);const[x,L]=a.useState("dashboard"),[i,l]=a.useState("en"),[m,c]=a.useState(!0),[w,f]=a.useState(!1),[v,p]=a.useState(!1),[_,R]=a.useState(!1),[C,B]=a.useState(!1),[O,U]=a.useState(null),[h,z]=a.useState([]),[b,D]=a.useState([]),[F,N]=a.useState([]),[P,Z]=a.useState([]),[k,T]=a.useState([]),[q,K]=a.useState([]),[E,j]=a.useState([]),[M,ee]=a.useState([]),[te,se]=a.useState([]),[$,G]=a.useState([]),[oe,ne]=a.useState([]),[V,W]=a.useState([]);a.useEffect(()=>{(async()=>{c(!0);const[t,s,r,A,S]=await Promise.all([g.getAll("rooms"),g.getAll("bookings"),g.getAll("categories"),g.getAll("tasks"),g.getAll("staff")]);z(t),D(s),Z(r),T(A),j(S),c(!1),(async()=>{const[de,ue,fe,me,ge,he,pe]=await Promise.all([g.getAll("guests"),g.getAll("templates"),g.getAll("feedback"),g.getAll("emails"),g.getAll("notifications"),g.getAll("conversations"),g.getAll("menu")]);N(de),K(ue),ee(fe),se(me),G(ge),ne(he),W(pe)})()})()},[]);const re=e=>{U(e),B(!0)},ae=()=>{B(!1),U(null)},ie=e=>{G(t=>t.map(s=>s.id===e?{...s,read:!0}:s))},le=()=>{f(!0)},ce=()=>{f(!1)},H=()=>{if(m)return o.jsx("div",{className:"flex items-center justify-center h-full",children:o.jsx("div",{className:"text-white",children:"Loading..."})});if(w)return o.jsx(X,{rooms:h,categories:P,bookings:b,menu:V,onBookingComplete:(e,t)=>{D(s=>[...s,e]),N(s=>[...s,t])},onFoodRequest:(e,t)=>{console.log("Food request:",e,t)},onServiceRequest:(e,t,s,r)=>{console.log("Service request:",e,t,s,r)},onExit:ce});switch(x){case"dashboard":return o.jsx(Q,{rooms:h,bookings:b,tasks:k,feedback:M,onPreviewWebsite:le,language:i});case"rooms":return o.jsx(Ee,{rooms:h,categories:P,bookings:b,onStatusChange:(e,t)=>{z(s=>s.map(r=>r.id===e?{...r,status:t}:r))},onRoomClick:e=>{console.log("Room clicked:",e)},onAddRoom:e=>{const t={...e,id:`r${Math.random().toString(36).substr(2,9)}`};z(s=>[...s,t])}});case"bookings":return o.jsx(ye,{rooms:h,guests:F,allBookings:b,categories:P,onClose:()=>L("dashboard"),onSubmit:({booking:e,newGuest:t})=>{D(s=>[...s,e]),t&&N(s=>[...s,t])}});case"staff":return o.jsx(je,{staff:E,tasks:k,onUpdateStaffStatus:(e,t)=>{j(s=>s.map(r=>r.id===e?{...r,status:t}:r))},onAddStaff:()=>p(!0),onDeleteStaff:e=>{j(t=>t.filter(s=>s.id!==e))},onGenerateAccessKey:(e,t)=>{var A;const s=`${((A=E.find(S=>S.id===e))==null?void 0:A.department.toLowerCase().substring(0,2))||"xx"}_${Math.random().toString(36).substring(2,15)}`,r={id:`ak${Math.random().toString(36).substr(2,5)}`,key:s,createdAt:new Date().toISOString(),description:t||"Generated Access Key",active:!0};j(S=>S.map(I=>I.id===e?{...I,accessKeys:[...I.accessKeys||[],r]}:I))},onRevokeAccessKey:(e,t)=>{j(s=>s.map(r=>{var A;return r.id===e?{...r,accessKeys:(A=r.accessKeys)==null?void 0:A.map(S=>S.id===t?{...S,active:!1}:S)}:r}))},currentUser:O});case"menu":return o.jsx(De,{menu:V,onUpdateMenu:W});case"tasks":return o.jsx(Le,{tasks:k,rooms:h,staff:E,templates:q,onUpdateStatus:(e,t)=>{T(s=>s.map(r=>r.id===e?{...r,status:t}:r))},onUpdatePriority:(e,t)=>{T(s=>s.map(r=>r.id===e?{...r,priority:t}:r))},onUpdateAssignedStaff:(e,t)=>{T(s=>s.map(r=>r.id===e?{...r,assignedStaffId:t}:r))},onReorderTask:(e,t,s)=>{console.log("Reorder task:",e,t,s)},onAddTask:()=>R(!0),onAddTemplate:()=>{console.log("Add template")},onDeleteTemplate:e=>{K(t=>t.filter(s=>s.id!==e))},onEditTemplate:e=>{console.log("Edit template:",e)},onUseTemplate:e=>{console.log("Use template:",e)}});case"feedback":return o.jsx(ke,{feedback:M,guests:F,rooms:h});case"revenue":return o.jsx(we,{rooms:h,bookings:b,categories:P});case"analytics":return o.jsx(Re,{bookings:b,rooms:h,categories:P,guests:F,tasks:k,staff:E});case"messages":return o.jsx(Ie,{conversations:oe,onSendMessage:(e,t)=>{console.log("Send message:",e,t)}});case"inbox":return o.jsx(Oe,{emails:te});case"settings":return o.jsx(Te,{staff:E,onAddStaff:()=>p(!0),onDeleteStaff:e=>{j(t=>t.filter(s=>s.id!==e))},currentUser:O});default:return o.jsx(Q,{rooms:h,bookings:b,tasks:k,feedback:M,language:i})}};return n?o.jsx(a.Suspense,{fallback:o.jsx("div",{className:"flex items-center justify-center h-screen bg-slate-50",children:o.jsx("div",{className:"text-slate-600",children:"Loading Booking Portal..."})}),children:o.jsx(X,{rooms:h,categories:P,bookings:b,menu:V,onBookingComplete:(e,t)=>{D(s=>[...s,e]),N(s=>[...s,t])},onFoodRequest:(e,t)=>{console.log("Food request:",e,t)},onServiceRequest:(e,t,s,r)=>{console.log("Service request:",e,t,s,r)},onExit:()=>{typeof window<"u"&&(window.location.href=window.location.pathname)}})}):!C||!O?o.jsx(Se,{staffMembers:E,onLogin:re}):w?o.jsx(a.Suspense,{fallback:o.jsx("div",{className:"flex items-center justify-center h-full min-h-screen bg-slate-50",children:o.jsx("div",{className:"text-slate-600",children:"Loading Preview..."})}),children:H()}):o.jsxs(o.Fragment,{children:[o.jsx(xe,{activeTab:x,setActiveTab:L,notificationCount:$.filter(e=>!e.read).length,inAppNotifications:$,onMarkNotifRead:ie,staff:E,currentUser:O,onLogout:ae,language:i,onLanguageChange:l,children:o.jsx(a.Suspense,{fallback:o.jsx("div",{className:"flex items-center justify-center h-full",children:o.jsx("div",{className:"text-white",children:"Loading..."})}),children:H()})}),v&&o.jsx(a.Suspense,{fallback:o.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-md flex items-center justify-center z-[70]",children:o.jsx("div",{className:"text-white",children:"Loading..."})}),children:o.jsx(Ae,{onClose:()=>p(!1),onSubmit:e=>{j(t=>[...t,e]),p(!1)}})}),_&&o.jsx(a.Suspense,{fallback:o.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-md flex items-center justify-center z-[70]",children:o.jsx("div",{className:"text-white",children:"Loading..."})}),children:o.jsx(Pe,{rooms:h,staff:E,tasks:k,templates:q,onClose:()=>R(!1),onSubmit:e=>{T(t=>[...t,e]),R(!1)}})})]})},Y=document.getElementById("root");if(!Y)throw new Error("Could not find root element to mount to");const Ce=_e.createRoot(Y);Ce.render(o.jsx(d.StrictMode,{children:o.jsx(Ne,{})}));
